# 9장. 유연한 설계

## 01. 개방-폐쇄 원칙

로버트 마틴이 고안한 원칙 중 개방-폐쇄 원칙은 다음과 같은 문장으로 요약가능하다.

**“소프트웨어 개체(클래스, 모듈, 함수 등등) 는 확장에 대해 열려 있어야 하고 수정에 대해서는 닫혀 있어야 한다.”**

<br>

개방-폐쇄 원칙은 유연한 설계란 기존의 코드를 수정하지 않고도 애플리케이션의 동작을 확장할 수 있는 설계라고 이야기한다. 

어떻게 코드를 수정하지 않고도 새로운 동작을 추가할 수 있을까?

<br>

### + 컴파일 타임 의존성을 고정시키고 런타임 의존성을 변경하라

바로 앞장에서 중복 할인 정책을 위해 자식 클래스로 OverlappedDiscountPolicy클래스를 추가했다. 기존의 DiscountPolicy, AmountDiscountPolicy. PercentDiscountPolicy 중 어떤 코드도 수정하지 않았다. 

⇒ 기존 코드는 전혀 손대지 않은 채 클래스를 추가하는 것 만으로 중복 할인 정책을 구현할 수 있었다. 

현재의 설계는 새로운 할인 정책을 추가해서 기능을 확장할 수 있도록 허용한다. → **확장에 열려있다.**

현재 설계는 기존 코드를 수정할 필요없이 새로운 할인 정책 기능을 확장할 수 있다. → **수정에는 닫혀있다.**

<br>

### + 추상화가 핵심이다

개방-폐쇄 원칙의 핵심은 **추상화에 의존**하는 것이다.

<br>

추상화란 핵심적인 부분만 남기고 불필요한 부분은 생략함으로써 복잡성을 극복하는 기법이다.

개방-폐쇄 원칙의 관점에서 생략되지 않고 남겨지는 부분은 다양한 상황에서의 공통점을 반영한 추상화의 결과물이다. 

**추상화를 통해 생략된 부분은 확장의 여지를 남기고 추상화부분은 수정에 닫혀있다.**

→ 이것이 추상화가 개방-폐쇄 원칙을 가능하게 만드는 이유다. 

<br>

여기서 주의할 점은 추상화를 했다고 해서 모든 수정에 대해 설계가 폐쇄되는 것은 아니다. 

→ 변경에 의한 파급효과를 최대한 피하기 위해 **변하는 것과 변하지 않는 것이 무엇인지 이해하고 이를 추상화의 목적으로 삼아야한다.**
